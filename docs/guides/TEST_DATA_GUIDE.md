# 테스트 데이터 사용 가이드

이 폴더에는 Remit Planner 앱의 테스트를 위한 다양한 INSERT 쿼리들이 포함되어 있습니다.

## 파일 구성

### 1. `test_data_insert_queries.sql` - 전체 테스트 데이터

- **용도**: 완전한 테스트 환경 구축
- **포함 내용**:
  - 2명의 사용자 (김철수, 이영희)
  - 5명의 근로자
  - 5개의 거래처
  - 4개의 스케줄 (다양한 케이스)
  - 급여 계산 데이터
  - 첨부파일 데이터
  - 활동 로그

### 2. `simple_test_data.sql` - 최소 테스트 데이터

- **용도**: 빠른 테스트 및 기본 기능 확인
- **포함 내용**:
  - 1명의 사용자
  - 2명의 근로자
  - 1개의 거래처
  - 2개의 스케줄
  - 기본 급여 계산

### 3. `scenario_test_data.sql` - 시나리오별 테스트 데이터

- **용도**: 특정 기능 테스트
- **포함 시나리오**:
  - 야간 근무 (22:00-06:00)
  - 연장 근무 (9시간)
  - 유류비/기타수당
  - 일별 다른 시간 설정
  - 첨부파일 관리
  - 급여 지급 완료
  - 복합 수당 구조

## 사용 방법

### 1. Supabase에서 실행

1. Supabase 대시보드 → SQL Editor
2. 원하는 파일의 내용을 복사
3. 실행하여 데이터 삽입

### 2. 단계별 실행

```sql
-- 1단계: 기본 데이터
-- simple_test_data.sql 실행

-- 2단계: 특정 시나리오 테스트
-- scenario_test_data.sql에서 원하는 시나리오만 실행

-- 3단계: 전체 데이터
-- test_data_insert_queries.sql 실행
```

## 테스트 시나리오

### 기본 기능 테스트

- 스케줄 생성/수정/삭제
- 근로자 등록/관리
- 거래처 관리
- 급여 계산

### 고급 기능 테스트

- 일별 다른 시간 설정
- 야간수당 계산 (22:00-06:00)
- 연장근무 수당 (1.5배)
- 유류비/기타수당 (3.3% 공제 제외)
- 첨부파일 관리
- 다중 사용자 데이터 분리

### 급여 계산 테스트

- 기본급: 시간당 임금 × 근무시간
- 야간수당: 22:00-06:00 근무 시 50% 추가
- 연장수당: 8시간 초과 시 1.5배
- 유류비/기타수당: 3.3% 공제 제외
- 세금 공제: 3.3% (유류비/기타수당 제외)

## 데이터 구조

### 사용자별 데이터 분리

- `user_id` 필드로 데이터 분리
- 각 사용자는 자신의 데이터만 접근 가능
- RLS 정책으로 보안 유지

### 관계형 데이터

- 스케줄 ↔ 근로자: 다대다 관계
- 스케줄 ↔ 거래처: 일대다 관계
- 근로자 ↔ 급여: 일대다 관계

## 주의사항

1. **user_id 값**: 실제 Supabase 사용자 ID로 변경 필요
2. **파일 URL**: 실제 Supabase Storage URL로 변경 필요
3. **날짜**: 현재 날짜 기준으로 조정 필요
4. **RLS 정책**: 사용자별 데이터 접근 권한 확인

## 문제 해결

### 데이터가 보이지 않는 경우

1. RLS 정책 확인
2. user_id 값 확인
3. 인증 상태 확인

### 급여 계산이 틀린 경우

1. 근무시간 확인
2. 야간/연장근무 시간 확인
3. 수당 설정 확인

### 첨부파일이 표시되지 않는 경우

1. Supabase Storage 설정 확인
2. 파일 URL 확인
3. RLS 정책 확인
